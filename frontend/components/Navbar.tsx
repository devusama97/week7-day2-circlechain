'use client';

import { AppBar, Toolbar, Typography, Button, Box, IconButton, Container, Avatar, Menu, MenuItem, Drawer, List, ListItem, ListItemText } from '@mui/material';
import MenuIcon from '@mui/icons-material/Menu';
import PersonIcon from '@mui/icons-material/Person';
import Link from 'next/link';
import Image from 'next/image';
import { useState, useEffect } from 'react';
import { useGetUserProfileQuery } from '../services/api';
import { useRouter } from 'next/navigation';

export default function Navbar() {
    const router = useRouter();
    const [token, setToken] = useState<string | null>(null);
    const { data: user } = useGetUserProfileQuery(undefined, {
        skip: !token
    });

    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);
    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
    const openMenu = Boolean(anchorEl);

    useEffect(() => {
        setToken(localStorage.getItem('token'));
    }, []);

    const handleProfileClick = (event: React.MouseEvent<HTMLElement>) => {
        setAnchorEl(event.currentTarget);
    };

    const handleClose = () => {
        setAnchorEl(null);
    };

    const handleLogout = () => {
        localStorage.removeItem('token');
        setToken(null);
        handleClose();
        router.push('/');
    };

    const handleProfileNav = () => {
        router.push('/profile');
        handleClose();
    };

    return (
        <AppBar position="static" color="inherit" elevation={0} sx={{ py: 2, bgcolor: 'transparent', background: 'transparent', boxShadow: 'none', minHeight: 'auto' }}>
            <Container maxWidth={false} sx={{ width: { xs: '100%', md: '100%', lg: '1321px' }, mx: 'auto', px: { xs: 2, md: 3 } }}>
                <Toolbar disableGutters sx={{ minHeight: 'auto !important' }}>
                    <Box sx={{ display: 'flex', alignItems: 'center', flexGrow: 1 }}>
                        <Link href="/" style={{ textDecoration: 'none', display: 'flex', alignItems: 'center', marginRight: '32px' }}>
                            <Box sx={{ display: 'flex', alignItems: 'center' }}>
                                <Image
                                    src="/imgs/logo.png"
                                    alt="Circlechain Logo"
                                    width={40}
                                    height={40}
                                    style={{ marginRight: '12px' }}
                                />
                                <Typography
                                    variant="h6"
                                    component="div"
                                    sx={{ fontWeight: 800, color: '#fff', fontSize: '1.3rem' }}
                                >
                                    Circlechain
                                </Typography>
                            </Box>
                        </Link>
                        <Box sx={{ display: { xs: 'none', md: 'flex' }, gap: 3 }}>
                            {['How it work', 'Blog', 'Support'].map((item) => (
                                <Link key={item} href="#" style={{ textDecoration: 'none' }}>
                                    <Typography sx={{ color: '#fff', fontSize: '1rem', '&:hover': { color: '#00ff88' } }}>
                                        {item}
                                    </Typography>
                                </Link>
                            ))}
                        </Box>
                    </Box>
                    <Box sx={{ display: { xs: 'none', md: 'flex' }, alignItems: 'center', gap: 2 }}>
                        <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.5204 13.1803V15.7966H14.6052V18.9943H16.5204V28.5H20.4572V18.9943H23.0982C23.0982 18.9943 23.3471 17.461 23.4668 15.7833H20.4724V13.5983C20.4724 13.2696 20.9018 12.8307 21.3274 12.8307H23.4706V9.5H20.5541C16.4235 9.5 16.5204 12.7015 16.5204 13.1803Z" fill="white" />
                            <path d="M7.6 3.8C6.59218 3.8 5.62563 4.20036 4.91299 4.91299C4.20036 5.62563 3.8 6.59218 3.8 7.6V30.4C3.8 31.4078 4.20036 32.3744 4.91299 33.087C5.62563 33.7996 6.59218 34.2 7.6 34.2H30.4C31.4078 34.2 32.3744 33.7996 33.087 33.087C33.7996 32.3744 34.2 31.4078 34.2 30.4V7.6C34.2 6.59218 33.7996 5.62563 33.087 4.91299C32.3744 4.20036 31.4078 3.8 30.4 3.8H7.6ZM7.6 0H30.4C32.4156 0 34.3487 0.800712 35.774 2.22599C37.1993 3.65126 38 5.58435 38 7.6V30.4C38 32.4156 37.1993 34.3487 35.774 35.774C34.3487 37.1993 32.4156 38 30.4 38H7.6C5.58435 38 3.65126 37.1993 2.22599 35.774C0.800712 34.3487 0 32.4156 0 30.4V7.6C0 5.58435 0.800712 3.65126 2.22599 2.22599C3.65126 0.800712 5.58435 0 7.6 0V0Z" fill="white" />
                        </svg>
                        <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 0C13.8349 0 13.1912 0.0249406 11.1698 0.110451C9.14014 0.210214 7.76722 0.524941 6.55582 0.995249C5.28796 1.4739 4.13974 2.2233 3.19121 3.19121C2.2206 4.13753 1.47078 5.28638 0.995249 6.55582C0.524941 7.76722 0.210214 9.14014 0.110451 11.1698C0.0190024 13.1924 0 13.8349 0 19C0 24.1651 0.0249406 24.8088 0.110451 26.8302C0.210214 28.8539 0.524941 30.2328 0.995249 31.4442C1.4739 32.712 2.2233 33.8603 3.19121 34.8088C4.13753 35.7794 5.28638 36.5292 6.55582 37.0047C7.76722 37.4691 9.14608 37.7898 11.1698 37.8895C13.1924 37.981 13.8349 38 19 38C24.1651 38 24.8088 37.9751 26.8302 37.8895C28.8539 37.7898 30.2328 37.4679 31.4442 37.0047C32.712 36.5261 33.8603 35.7767 34.8088 34.8088C35.7807 33.8635 36.5307 32.7143 37.0048 31.4442C37.4691 30.2328 37.7898 28.8539 37.8895 26.8302C37.981 24.8076 38 24.1651 38 19C38 13.8349 37.9751 13.1912 37.8895 11.1698C37.7898 9.14608 37.4679 7.76009 37.0048 6.55582C36.5261 5.28796 35.7767 4.13974 34.8088 3.19121C33.8635 2.21935 32.7144 1.46933 31.4442 0.995249C30.2328 0.524941 28.8539 0.210214 26.8302 0.110451C24.8076 0.0190024 24.1651 0 19 0ZM19 3.42043C24.0724 3.42043 24.6781 3.44537 26.6829 3.53088C28.5321 3.61758 29.5392 3.92637 30.2078 4.18765C31.0345 4.49278 31.7826 4.97844 32.3979 5.60926C33.0276 6.22188 33.5115 6.96835 33.8135 7.79335C34.0748 8.462 34.3836 9.46912 34.4703 11.3183C34.5558 13.323 34.5808 13.9299 34.5808 19.0012C34.5808 24.0724 34.5558 24.6793 34.4632 26.6841C34.3634 28.5333 34.0546 29.5404 33.7945 30.209C33.4347 31.101 33.0333 31.7245 32.3705 32.399C31.7533 33.0259 31.0056 33.5092 30.1805 33.8147C29.5202 34.076 28.4988 34.3848 26.6425 34.4715C24.6271 34.557 24.0333 34.5819 18.9477 34.5819C13.8622 34.5819 13.2696 34.557 11.2518 34.4644C9.40261 34.3646 8.38242 34.0558 7.71378 33.7957C6.81116 33.4359 6.1924 33.0344 5.52969 32.3717C4.86105 31.7031 4.43587 31.0665 4.10808 30.1817C3.84204 29.5214 3.538 28.5 3.43943 26.6437C3.37173 24.652 3.33967 24.0344 3.33967 18.9727C3.33967 13.9133 3.37173 13.2945 3.43943 11.2779C3.538 9.42162 3.84204 8.40261 4.10808 7.7399C4.43587 6.8361 4.86223 6.21853 5.52969 5.54988C6.19121 4.88836 6.81116 4.46081 7.71378 4.12589C8.38242 3.8658 9.37767 3.55701 11.234 3.46437C13.2494 3.39192 13.8432 3.3658 18.9216 3.3658L19 3.42043ZM19 9.24822C17.7189 9.24775 16.4503 9.49973 15.2667 9.98975C14.0831 10.4798 13.0076 11.1983 12.1017 12.1041C11.1959 13.01 10.4774 14.0854 9.98738 15.2691C9.49735 16.4527 9.24538 17.7213 9.24584 19.0024C9.24538 20.2834 9.49735 21.552 9.98738 22.7357C10.4774 23.9193 11.1959 24.9948 12.1017 25.9007C13.0076 26.8065 14.0831 27.525 15.2667 28.015C16.4503 28.505 17.7189 28.757 19 28.7565C20.2811 28.757 21.5497 28.505 22.7333 28.015C23.917 27.525 24.9924 26.8065 25.8983 25.9007C26.8041 24.9948 27.5226 23.9193 28.0126 22.7357C28.5026 21.552 28.7546 20.2834 28.7542 19.0024C28.7546 17.7213 28.5026 16.4527 28.0126 15.2691C27.5226 14.0854 26.8041 13.01 25.8983 12.1041C24.9924 11.1983 23.917 10.4798 22.7333 9.98975C21.5497 9.49973 20.2811 9.24775 19 9.24822ZM19 25.3361C15.4988 25.3361 12.6663 22.5036 12.6663 19.0024C12.6663 15.5012 15.4988 12.6686 19 12.6686C22.5012 12.6686 25.3337 15.5012 25.3337 19.0024C25.3337 22.5036 22.5012 25.3361 19 25.3361ZM31.4276 8.85867C31.4269 9.46397 31.186 10.0443 30.7578 10.4721C30.3296 10.8998 29.749 11.1401 29.1437 11.1401C28.8444 11.1401 28.548 11.0812 28.2715 10.9667C27.995 10.8521 27.7438 10.6842 27.5321 10.4726C27.3205 10.261 27.1526 10.0097 27.0381 9.73322C26.9236 9.45671 26.8646 9.16034 26.8646 8.86104C26.8646 8.56175 26.9236 8.26538 27.0381 7.98887C27.1526 7.71236 27.3205 7.46111 27.5321 7.24948C27.7438 7.03785 27.995 6.86997 28.2715 6.75543C28.548 6.6409 28.8444 6.58195 29.1437 6.58195C30.3991 6.58195 31.4276 7.60333 31.4276 8.85867Z" fill="white" />
                        </svg>
                        <svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.6667 32.4583H8.54175V15.375H13.6667V32.4583ZM32.4584 32.4583H27.3334V23.3324C27.3334 20.9544 26.4861 19.7705 24.8068 19.7705C23.476 19.7705 22.6321 20.4334 22.2084 21.7608V32.4583H17.0834C17.0834 32.4583 17.1517 17.0833 17.0834 15.375H21.1287L21.4414 18.7917H21.5473C22.5979 17.0833 24.2772 15.9251 26.58 15.9251C28.3311 15.9251 29.7473 16.412 30.8287 17.6351C31.9169 18.86 32.4584 20.5034 32.4584 22.8114V32.4583Z" fill="white" />
                            <path d="M11.1042 13.6667C12.5666 13.6667 13.7521 12.5194 13.7521 11.1042C13.7521 9.68893 12.5666 8.54166 11.1042 8.54166C9.64181 8.54166 8.4563 9.68893 8.4563 11.1042C8.4563 12.5194 9.64181 13.6667 11.1042 13.6667Z" fill="white" />
                            <rect x="3.5" y="4.5" width="35" height="35" rx="3.5" stroke="white" strokeWidth="3" />
                        </svg>

                        <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14.135 9.2868C14.0593 9.27488 13.9825 9.27306 13.9064 9.2814C12.3926 9.4452 10.0886 10.2624 8.72776 11.0004C8.63788 11.0494 8.55743 11.114 8.49016 11.1912C7.92496 11.8374 7.41196 12.8904 7.01056 13.8876C6.59656 14.91 6.25456 15.99 6.06196 16.7712C5.42476 19.3092 5.07736 22.3566 5.03056 25.2474C5.02907 25.3916 5.06373 25.534 5.13136 25.6614C5.67136 26.6928 6.83596 27.6486 8.00236 28.347C9.18136 29.0544 10.5584 29.6124 11.6672 29.7204C11.8 29.7331 11.934 29.7148 12.0586 29.667C12.1832 29.6192 12.2951 29.5433 12.3854 29.445C12.6626 29.1444 13.1342 28.4424 13.4906 27.897C13.6526 27.6486 13.8056 27.411 13.9244 27.222C15.116 27.438 16.61 27.564 18.5 27.564C20.3864 27.564 21.8804 27.438 23.072 27.222C23.1908 27.4128 23.342 27.6486 23.504 27.8952C23.8604 28.4424 24.332 29.1444 24.611 29.445C24.7013 29.5433 24.8131 29.6192 24.9377 29.667C25.0623 29.7148 25.1963 29.7331 25.3292 29.7204C26.438 29.6124 27.8132 29.0544 28.9922 28.347C30.1586 27.6486 31.3232 26.6928 31.865 25.6614C31.932 25.5338 31.966 25.3915 31.964 25.2474C31.919 22.3566 31.5698 19.3074 30.9362 16.7694C30.6816 15.7892 30.3635 14.8265 29.984 13.8876C29.5826 12.8904 29.0696 11.8356 28.5062 11.1912C28.4384 11.1139 28.3573 11.0492 28.2668 11.0004C26.9078 10.2624 24.6038 9.4452 23.0882 9.2814C23.0127 9.27322 22.9364 9.27504 22.8614 9.2868C22.5221 9.35208 22.2039 9.49913 21.9344 9.7152C21.3306 10.2013 20.8424 10.8155 20.5052 11.5134C19.8381 11.4611 19.1691 11.4353 18.5 11.436C17.7764 11.436 17.1068 11.463 16.4894 11.5116C16.1519 10.8143 15.6637 10.2007 15.0602 9.7152C14.7911 9.4994 14.4736 9.35236 14.135 9.2868ZM24.8324 26.7684C25.0857 27.1585 25.3455 27.5444 25.6118 27.9258C26.3246 27.7638 27.2336 27.3858 28.1048 26.8638C29.0822 26.2788 29.858 25.6038 30.2324 25.0332C30.173 22.3224 29.8382 19.5072 29.2604 17.1888C29.025 16.2858 28.7316 15.399 28.382 14.5338C28.022 13.6374 27.635 12.8778 27.2984 12.4422C26.1284 11.8356 24.2834 11.1948 23.081 11.0202C23.0448 11.0421 23.0099 11.0662 22.9766 11.0922C22.8274 11.2095 22.6911 11.3423 22.5698 11.4882C22.4988 11.5727 22.431 11.6598 22.3664 11.7492C22.9154 11.85 23.405 11.9706 23.8388 12.1038C25.07 12.4818 25.9574 13.0038 26.3912 13.5816C26.5287 13.7649 26.5877 13.9953 26.5553 14.2222C26.5229 14.449 26.4017 14.6537 26.2184 14.7912C26.1276 14.8593 26.0243 14.9088 25.9144 14.937C25.8045 14.9651 25.6901 14.9714 25.5778 14.9553C25.3509 14.9229 25.1462 14.8017 25.0088 14.6184C24.9026 14.478 24.44 14.0964 23.3312 13.7544C22.2602 13.4268 20.6852 13.164 18.5 13.164C16.3148 13.164 14.738 13.4268 13.6688 13.7562C12.56 14.0982 12.0974 14.4762 11.9912 14.6184C11.9231 14.7092 11.8378 14.7856 11.7402 14.8434C11.6425 14.9013 11.5345 14.9393 11.4222 14.9553C11.1953 14.9877 10.9649 14.9287 10.7816 14.7912C10.6908 14.7231 10.6143 14.6378 10.5565 14.5402C10.4987 14.4426 10.4607 14.3345 10.4446 14.2222C10.4122 13.9953 10.4713 13.7649 10.6088 13.5816C11.0426 13.002 11.93 12.4836 13.1612 12.1056C13.5932 11.9706 14.0828 11.8518 14.63 11.751C14.5653 11.6606 14.4968 11.5729 14.4248 11.4882C14.304 11.3424 14.1683 11.2096 14.0198 11.0922C13.9858 11.0661 13.9503 11.0421 13.9136 11.0202C12.713 11.1948 10.868 11.8356 9.69796 12.4422C9.35956 12.8796 8.97436 13.6374 8.61256 14.5338C8.22916 15.4878 7.91056 16.4904 7.73596 17.1888C7.15636 19.5072 6.82156 22.3224 6.76396 25.0332C7.13836 25.6056 7.91236 26.2788 8.88976 26.8656C9.76276 27.3876 10.67 27.7656 11.3846 27.9258C11.6535 27.5462 11.9134 27.1603 12.164 26.7684C10.751 26.2662 9.99316 25.5768 9.49996 24.8388C9.43709 24.7442 9.39345 24.6382 9.37154 24.5268C9.34963 24.4154 9.34989 24.3008 9.37228 24.1894C9.39468 24.0781 9.43879 23.9723 9.50208 23.878C9.56537 23.7838 9.64661 23.7029 9.74116 23.64C9.83571 23.5771 9.94173 23.5335 10.0531 23.5116C10.1646 23.4897 10.2792 23.4899 10.3905 23.5123C10.5018 23.5347 10.6077 23.5788 10.7019 23.6421C10.7962 23.7054 10.8771 23.7866 10.94 23.8812C11.408 24.5868 12.6392 25.836 18.5 25.836C24.3626 25.836 25.592 24.5868 26.06 23.8812C26.1869 23.6902 26.3846 23.5576 26.6094 23.5123C26.8342 23.4671 27.0678 23.513 27.2588 23.64C27.4497 23.767 27.5824 23.9646 27.6276 24.1894C27.6729 24.4143 27.6269 24.6478 27.5 24.8388C27.0068 25.5768 26.2472 26.268 24.8324 26.7684ZM12.344 18.6216C12.7832 18.15 13.379 17.8836 14 17.88C14.621 17.8836 15.2168 18.15 15.656 18.6216C16.0934 19.095 16.34 19.734 16.34 20.4C16.34 21.066 16.0934 21.705 15.656 22.1784C15.2168 22.65 14.621 22.9164 14 22.92C13.6878 22.9167 13.3797 22.8492 13.0948 22.7216C12.8099 22.594 12.5543 22.4091 12.344 22.1784C11.9005 21.6927 11.6562 21.0577 11.66 20.4C11.66 19.734 11.9066 19.095 12.344 18.6216ZM23 17.88C22.379 17.8836 21.7832 18.15 21.344 18.6216C20.9066 19.095 20.66 19.734 20.66 20.4C20.66 21.066 20.9066 21.705 21.344 22.1784C21.7832 22.65 22.379 22.9164 23 22.92C23.621 22.9164 24.2168 22.65 24.656 22.1784C25.0934 21.705 25.34 21.066 25.34 20.4C25.34 19.734 25.0934 19.095 24.656 18.6216C24.4456 18.3909 24.1901 18.206 23.9052 18.0784C23.6202 17.9508 23.3121 17.8833 23 17.88Z" fill="white" />
                            <rect x="1.5" y="1.5" width="35" height="35" rx="3.5" stroke="white" strokeWidth="3" />
                        </svg>

                        <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clipPath="url(#clip0_1_498)">
                                <path opacity="0.2" d="M13.3207 20.0836L30 8.09112C29.8818 8.03554 29.7533 8.00469 29.6226 8.00049C29.4919 7.9963 29.3618 8.01884 29.2402 8.06672L6.6171 16.9116C5.71022 17.2654 5.83277 18.583 6.78867 18.7782L13.3207 20.0836ZM18.8233 24.9025L14.9996 28.7088C14.8632 28.8467 14.6887 28.9411 14.4983 28.9801C14.3079 29.019 14.1101 29.0007 13.9301 28.9274C13.7502 28.8542 13.5962 28.7294 13.4876 28.5688C13.3791 28.4082 13.321 28.2192 13.3207 28.0256V20.0836L18.8233 24.9025Z" fill="white" />
                                <path d="M30.3636 7.44761C30.1074 7.22705 29.7971 7.08114 29.4659 7.02538C29.1346 6.96963 28.7946 7.00612 28.4821 7.13097L7.17444 15.6334C6.8007 15.7781 6.48414 16.0436 6.27348 16.389C6.06283 16.7344 5.96977 17.1406 6.00863 17.545C6.0433 17.9493 6.20603 18.3312 6.47241 18.6336C6.73878 18.9359 7.09446 19.1424 7.48609 19.222L12.8996 20.3127V27.185C12.8994 27.5568 13.0079 27.9203 13.2113 28.2293C13.4148 28.5383 13.704 28.779 14.0423 28.9207C14.2662 29.0123 14.5051 29.06 14.7464 29.0614C14.989 29.0623 15.2293 29.014 15.4532 28.9194C15.6772 28.8247 15.8803 28.6856 16.0507 28.5103L19.0518 25.4728L23.588 29.5305C23.9229 29.8306 24.3535 29.9973 24.8 29.9996C24.9964 30.0038 25.1919 29.972 25.3772 29.9058C25.6817 29.8079 25.9559 29.6309 26.1725 29.3923C26.3891 29.1537 26.5407 28.8618 26.6122 28.5454L30.9522 9.28883C31.0281 8.95655 31.0134 8.60955 30.9097 8.28513C30.8059 7.96072 30.6171 7.67117 30.3636 7.44761ZM13.6037 18.5419L7.85545 17.3808L23.969 10.9424L13.6037 18.5419ZM14.7464 27.185V21.6262L17.6551 24.2297L14.7464 27.185ZM24.8116 28.1232L15.3004 19.6208L29.0015 9.57029L24.8116 28.1232Z" fill="white" />
                                <rect x="1.5" y="1.5" width="35" height="35" rx="3.5" stroke="white" strokeWidth="3" />
                            </g>
                            <defs>
                                <clipPath id="clip0_1_498">
                                    <rect width="38" height="38" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>
                        {token ? (
                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
                                <IconButton
                                    onClick={handleProfileClick}
                                    size="small"
                                    aria-controls={openMenu ? 'profile-menu' : undefined}
                                    aria-haspopup="true"
                                    aria-expanded={openMenu ? 'true' : undefined}
                                >
                                    <Avatar
                                        src={user?.picture}
                                        sx={{ width: 40, height: 40, border: '2px solid #00ff88' }}
                                    >
                                        {!user?.picture && <PersonIcon />}
                                    </Avatar>
                                </IconButton>
                                <Menu
                                    id="profile-menu"
                                    anchorEl={anchorEl}
                                    open={openMenu}
                                    onClose={handleClose}
                                    transformOrigin={{ horizontal: 'right', vertical: 'top' }}
                                    anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}
                                    PaperProps={{
                                        sx: {
                                            mt: 1.5,
                                            bgcolor: '#010010',
                                            border: '1px solid rgba(255, 255, 255, 0.1)',
                                            boxShadow: '0 0 10px rgba(115, 253, 170, 0.3)',
                                            '& .MuiMenuItem-root': {
                                                color: '#fff',
                                                '&:hover': {
                                                    bgcolor: 'rgba(115, 253, 170, 0.1)',
                                                    color: '#73FDAA'
                                                }
                                            }
                                        }
                                    }}
                                >
                                    <MenuItem onClick={handleProfileNav}>Profile</MenuItem>
                                    <MenuItem onClick={handleLogout}>Logout</MenuItem>
                                </Menu>
                            </Box>
                        ) : (
                            <Button
                                component={Link}
                                href="/login"
                                variant="contained"
                                sx={{
                                    background: '#BBFFFF',
                                    color: '#000',
                                    borderRadius: 2,
                                    fontWeight: 600,
                                    textTransform: 'none',
                                    '&:hover': {
                                        background: '#73FDAA'
                                    }
                                }}
                            >
                                Login
                            </Button>
                        )}
                    </Box>
                    
                    {/* Mobile Hamburger Menu */}
                    <IconButton
                        sx={{ display: { xs: 'flex', md: 'none' }, color: '#fff' }}
                        onClick={() => setMobileMenuOpen(true)}
                    >
                        <MenuIcon />
                    </IconButton>
                    
                    {/* Mobile Drawer */}
                    <Drawer
                        anchor="right"
                        open={mobileMenuOpen}
                        onClose={() => setMobileMenuOpen(false)}
                        PaperProps={{
                            sx: {
                                bgcolor: '#0d1117',
                                width: '250px',
                                color: '#fff'
                            }
                        }}
                    >
                        <Box sx={{ p: 3 }}>
                            <List>
                                {['How it work', 'Blog', 'Support'].map((item) => (
                                    <ListItem key={item} component={Link} href="#" sx={{ color: '#fff', '&:hover': { color: '#00ff88' } }}>
                                        <ListItemText primary={item} />
                                    </ListItem>
                                ))}
                                {token ? (
                                    <>
                                        <ListItem component={Link} href="/profile" sx={{ color: '#fff', '&:hover': { color: '#00ff88' } }}>
                                            <ListItemText primary="Profile" />
                                        </ListItem>
                                        <ListItem onClick={handleLogout} sx={{ color: '#fff', cursor: 'pointer', '&:hover': { color: '#00ff88' } }}>
                                            <ListItemText primary="Logout" />
                                        </ListItem>
                                    </>
                                ) : (
                                    <ListItem component={Link} href="/login" sx={{ color: '#fff', '&:hover': { color: '#00ff88' } }}>
                                        <ListItemText primary="Login" />
                                    </ListItem>
                                )}
                            </List>
                        </Box>
                    </Drawer>
                </Toolbar>
            </Container>
        </AppBar>
    );
}
